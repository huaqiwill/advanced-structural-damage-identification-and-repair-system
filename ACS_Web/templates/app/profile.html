{% extends "app/base.html" %}

{% block title %}个人中心 - 结构损伤检测{% endblock %}

{% block app_content %}
<!-- 用户信息卡片 -->
<div class="mobile-card">
    <div class="text-center">
        <div class="mb-3">
            <img src="{{ current_user.avatar or url_for('static', filename='images/default-avatar.png') }}" 
                 class="rounded-circle" 
                 style="width: 80px; height: 80px; object-fit: cover;">
        </div>
        <h4>{{ current_user.username }}</h4>
        <p class="text-muted">{{ current_user.email }}</p>
    </div>
</div>

<!-- 统计信息 -->
<div class="mobile-card">
    <div class="row text-center">
        <div class="col-4">
            <h5>{{ stats.total_detections }}</h5>
            <p class="text-muted mb-0">总检测</p>
        </div>
        <div class="col-4">
            <h5>{{ stats.damage_detections }}</h5>
            <p class="text-muted mb-0">损伤发现</p>
        </div>
        <div class="col-4">
            <h5>{{ stats.accuracy }}%</h5>
            <p class="text-muted mb-0">准确率</p>
        </div>
    </div>
</div>

<!-- 功能菜单 -->
<div class="mobile-card">
    <div class="list-group">
        <a href="{{ url_for('app_settings') }}" class="list-group-item list-group-item-action">
            <i class="fas fa-cog me-2"></i>设置
        </a>
        <a href="{{ url_for('app_notifications') }}" class="list-group-item list-group-item-action">
            <i class="fas fa-bell me-2"></i>消息通知
            {% if unread_notifications %}
            <span class="badge bg-danger float-end">{{ unread_notifications }}</span>
            {% endif %}
        </a>
        <a href="{{ url_for('app_help') }}" class="list-group-item list-group-item-action">
            <i class="fas fa-question-circle me-2"></i>帮助中心
        </a>
        <a href="{{ url_for('app_feedback') }}" class="list-group-item list-group-item-action">
            <i class="fas fa-comment-alt me-2"></i>意见反馈
        </a>
    </div>
</div>

<!-- 关于我们 -->
<div class="mobile-card">
    <div class="list-group">
        <a href="{{ url_for('app_about') }}" class="list-group-item list-group-item-action">
            <i class="fas fa-info-circle me-2"></i>关于我们
        </a>
        <a href="{{ url_for('app_privacy') }}" class="list-group-item list-group-item-action">
            <i class="fas fa-shield-alt me-2"></i>隐私政策
        </a>
        <a href="{{ url_for('app_terms') }}" class="list-group-item list-group-item-action">
            <i class="fas fa-file-contract me-2"></i>用户协议
        </a>
    </div>
</div>

<!-- 退出登录 -->
<div class="mt-4">
    <a href="{{ url_for('logout') }}" class="mobile-btn btn-danger">
        <i class="fas fa-sign-out-alt me-2"></i>退出登录
    </a>
</div>
{% endblock %} 